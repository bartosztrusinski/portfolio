---
import { Image } from 'astro:assets';
import { Icon } from 'astro-icon/components';
import type { Project } from '@/content.config';
import { technologies } from '@/data/technologies';

type Props = Project;

const project = Astro.props;
---

<article class='flex flex-col gap-2'>
  <h3 class='flex items-center gap-1 px-1 text-lg font-semibold'>
    {
      project.logo && (
        <Image src={project.logo} alt={`${project.name} logo`} class='inline size-5' />
      )
    }
    {project.name}
  </h3>
  {
    project.url ?
      <a
        href={project.url}
        target='_blank'
        class='link outline-[6px] outline-offset-0 transition-transform duration-300 hover:scale-105'>
        <Image
          src={project.thumbnail}
          alt={`${project.name} app thumbnail`}
          class='aspect-video w-full rounded object-cover object-top shadow-md'
        />
      </a>
    : <Image
        src={project.thumbnail}
        alt={`${project.name} app thumbnail`}
        class='aspect-video w-full rounded object-cover object-top shadow-md'
      />
  }
  <p class='p-1'>{project.description}</p>
  <section>
    <details>
      <summary class='link cursor-pointer px-1 marker:text-primary'>
        <h4 class='inline font-semibold'>Tech Stack</h4>
      </summary>
      <ul class='flex flex-wrap gap-1 py-2 pl-4 text-sm' role='list'>
        {
          project.techStack.map((technologyKey) => {
            const technology = technologies[technologyKey];

            return (
              <li class='flex items-center gap-1 rounded border border-solid bg-slate-50 px-2 py-1 shadow'>
                <Icon
                  name={technology.logo}
                  class:list={['min-h-4 min-w-4 max-w-5', technology.class]}
                />
                {technology.name}
              </li>
            );
          })
        }
      </ul>
    </details>
  </section>
  <section>
    <details>
      <summary class='link cursor-pointer px-1 marker:text-primary'>
        <h4 class='inline font-semibold'>Features</h4>
      </summary>
      <ul class='py-2 pl-2 font-light'>
        {
          project.features.map((feature) => (
            <li class='flex'>
              <Icon name='lucide:dot' class='inline size-5 shrink-0 stroke-2' />
              {feature}
            </li>
          ))
        }
      </ul>
    </details>
  </section>
  <section class='mt-2 flex gap-2'>
    {
      project.url && (
        <a
          href={project.url}
          target='_blank'
          class='btn flex grow basis-1/2 items-center justify-center gap-1'>
          <Icon name='lucide:square-arrow-out-up-right' size={18} />
          Visit
        </a>
      )
    }
    <a
      href={project.repo}
      target='_blank'
      class='btn flex grow basis-1/2 items-center justify-center gap-1'>
      <Icon name='lucide:github' size={18} />
      Repo
    </a>
  </section>
</article>
